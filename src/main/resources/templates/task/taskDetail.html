<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Task Detail</title>
  <link crossorigin="anonymous"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    rel="stylesheet" />
</head>

<body>
  <div class="container">
    <h1>Task Detail</h1>
    <p><b>Title:</b> <span th:text="${task.title}"></span></p>
    <p><b>Description:</b> <span th:text="${task.description}"></span></p>
    <p><b>Due Date:</b> <span th:text="${task.dueDate}"></span></p>
    <p><b>Priority:</b> <span th:text="${task.priority}"></span></p>
    <a th:href="@{/task/{id}/edit(id=*{task.id})}"
      class="btn btn-secondary mt-3">Edit</a>
    <a href="/api/task" class="btn btn-primary mt-3">戻る</a>
    <div class="container">
      <h2>共有一覧</h2>
      <form th:action="@{/task/{id}/share(id=${task.id})}" th:method="post">
        <label class="form-label">アドレス: </label>
        <input type="email" class="form-control" name="user_email" />
        <input type="submit" value="追加" class="btn btn-success" />
      </form>

      <table class="table mt-3">
        <tbody>
          <tr th:each="sharedUser: ${sharedUsers}">
            <td th:text="${sharedUser.name}"></td>
            <td th:text="${sharedUser.email}"></td>
            <td>
              <form
                th:action="@{/task/{task}/share/{user}(task=${task.id}, user=${sharedUser.id})}"
                th:method="delete" style="display: inline">
                <input type="submit" value="Delete" class="btn btn-danger" />
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script crossorigin="anonymous"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>